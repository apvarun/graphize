(function(){function m(l){return l&&l.__esModule?l.default:l}function te(l){Object.defineProperty(l,"__esModule",{value:!0,configurable:!0})}function O(l,J,x,e){Object.defineProperty(l,J,{get:x,set:e,enumerable:!0,configurable:!0})}var ne=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},_=ne.parcelRequire94c2,ue=_.register;ue("5LqVC",function(l,J){te(l.exports),O(l.exports,"DiffEditor",function(){return we}),O(l.exports,"useMonaco",function(){return Re}),O(l.exports,"Editor",function(){return Z}),O(l.exports,"default",function(){return Le}),O(l.exports,"loader",function(){return _("kOEXK").default});var x=_("kOEXK"),e=_("bnwTv"),ce={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},U=ce,ie={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ae=ie;function oe({children:r}){return m(e).createElement("div",{style:ae.container},r)}var fe=oe,de=fe;function le({width:r,height:n,isEditorReady:c,loading:t,_ref:p,className:g,wrapperProps:M}){return m(e).createElement("section",{style:{...U.wrapper,width:r,height:n},...M},!c&&m(e).createElement(de,null,t),m(e).createElement("div",{ref:p,style:{...U.fullWidth,...!c&&U.hide},className:g}))}var se=le,Q=(0,e.memo)(se);function $e(r){(0,e.useEffect)(r,[])}var X=$e;function pe(r,n,c=!0){let t=(0,e.useRef)(!0);(0,e.useEffect)(t.current||!c?()=>{t.current=!1}:r,n)}var h=pe;function V(){}function y(r,n,c,t){return ge(r,t)||ve(r,n,c,t)}function ge(r,n){return r.editor.getModel(Y(r,n))}function ve(r,n,c,t){return r.editor.createModel(n,c,t?Y(r,t):void 0)}function Y(r,n){return r.Uri.parse(n)}function he({original:r,modified:n,language:c,originalLanguage:t,modifiedLanguage:p,originalModelPath:g,modifiedModelPath:M,keepCurrentOriginalModel:R=!1,keepCurrentModifiedModel:j=!1,theme:E="light",loading:D="Loading...",options:w={},height:q="100%",width:F="100%",className:K,wrapperProps:z={},beforeMount:H=V,onMount:W=V}){let[v,k]=(0,e.useState)(!1),[C,o]=(0,e.useState)(!0),f=(0,e.useRef)(null),a=(0,e.useRef)(null),S=(0,e.useRef)(null),s=(0,e.useRef)(W),u=(0,e.useRef)(H),L=(0,e.useRef)(!1);X(()=>{let i=x.default.init();return i.then(d=>(a.current=d)&&o(!1)).catch(d=>d?.type!=="cancelation"&&console.error("Monaco initialization: error:",d)),()=>f.current?P():i.cancel()}),h(()=>{if(f.current&&a.current){let i=f.current.getOriginalEditor(),d=y(a.current,r||"",t||c||"text",g||"");d!==i.getModel()&&i.setModel(d)}},[g],v),h(()=>{if(f.current&&a.current){let i=f.current.getModifiedEditor(),d=y(a.current,n||"",p||c||"text",M||"");d!==i.getModel()&&i.setModel(d)}},[M],v),h(()=>{let i=f.current.getModifiedEditor();i.getOption(a.current.editor.EditorOption.readOnly)?i.setValue(n||""):n!==i.getValue()&&(i.executeEdits("",[{range:i.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),i.pushUndoStop())},[n],v),h(()=>{f.current?.getModel()?.original.setValue(r||"")},[r],v),h(()=>{let{original:i,modified:d}=f.current.getModel();a.current.editor.setModelLanguage(i,t||c||"text"),a.current.editor.setModelLanguage(d,p||c||"text")},[c,t,p],v),h(()=>{a.current?.editor.setTheme(E)},[E],v),h(()=>{f.current?.updateOptions(w)},[w],v);let N=(0,e.useCallback)(()=>{if(!a.current)return;u.current(a.current);let i=y(a.current,r||"",t||c||"text",g||""),d=y(a.current,n||"",p||c||"text",M||"");f.current?.setModel({original:i,modified:d})},[c,n,p,r,t,g,M]),I=(0,e.useCallback)(()=>{!L.current&&S.current&&(f.current=a.current.editor.createDiffEditor(S.current,{automaticLayout:!0,...w}),N(),a.current?.editor.setTheme(E),k(!0),L.current=!0)},[w,E,N]);(0,e.useEffect)(()=>{v&&s.current(f.current,a.current)},[v]),(0,e.useEffect)(()=>{!C&&!v&&I()},[C,v,I]);function P(){let i=f.current?.getModel();R||i?.original?.dispose(),j||i?.modified?.dispose(),f.current?.dispose()}return m(e).createElement(Q,{width:F,height:q,isEditorReady:v,loading:D,_ref:S,className:K,wrapperProps:z})}var Me=he,we=(0,e.memo)(Me);function Ee(){let[r,n]=(0,e.useState)(x.default.__getMonacoInstance());return X(()=>{let c;return r||(c=x.default.init(),c.then(t=>{n(t)})),()=>c?.cancel()}),r}var Re=Ee;function be(r){let n=(0,e.useRef)();return(0,e.useEffect)(()=>{n.current=r},[r]),n.current}var me=be,T=new Map;function xe({defaultValue:r,defaultLanguage:n,defaultPath:c,value:t,language:p,path:g,theme:M="light",line:R,loading:j="Loading...",options:E={},overrideServices:D={},saveViewState:w=!0,keepCurrentModel:q=!1,width:F="100%",height:K="100%",className:z,wrapperProps:H={},beforeMount:W=V,onMount:v=V,onChange:k,onValidate:C=V}){let[o,f]=(0,e.useState)(!1),[a,S]=(0,e.useState)(!0),s=(0,e.useRef)(null),u=(0,e.useRef)(null),L=(0,e.useRef)(null),N=(0,e.useRef)(v),I=(0,e.useRef)(W),P=(0,e.useRef)(),i=(0,e.useRef)(t),d=me(g),ee=(0,e.useRef)(!1),A=(0,e.useRef)(!1);X(()=>{let $=x.default.init();return $.then(b=>(s.current=b)&&S(!1)).catch(b=>b?.type!=="cancelation"&&console.error("Monaco initialization: error:",b)),()=>u.current?Oe():$.cancel()}),h(()=>{let $=y(s.current,r||t||"",n||p||"",g||c||"");$!==u.current?.getModel()&&(w&&T.set(d,u.current?.saveViewState()),u.current?.setModel($),w&&u.current?.restoreViewState(T.get(g)))},[g],o),h(()=>{u.current?.updateOptions(E)},[E],o),h(()=>{!u.current||t===void 0||(u.current.getOption(s.current.editor.EditorOption.readOnly)?u.current.setValue(t):t!==u.current.getValue()&&(A.current=!0,u.current.executeEdits("",[{range:u.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),u.current.pushUndoStop(),A.current=!1))},[t],o),h(()=>{let $=u.current?.getModel();$&&p&&s.current?.editor.setModelLanguage($,p)},[p],o),h(()=>{R!==void 0&&u.current?.revealLine(R)},[R],o),h(()=>{s.current?.editor.setTheme(M)},[M],o);let re=(0,e.useCallback)(()=>{if(!(!L.current||!s.current)&&!ee.current){I.current(s.current);let $=g||c,b=y(s.current,t||r||"",n||p||"",$||"");u.current=s.current?.editor.create(L.current,{model:b,automaticLayout:!0,...E},D),w&&u.current.restoreViewState(T.get($)),s.current.editor.setTheme(M),R!==void 0&&u.current.revealLine(R),f(!0),ee.current=!0}},[r,n,c,t,p,g,E,D,w,M,R]);(0,e.useEffect)(()=>{o&&N.current(u.current,s.current)},[o]),(0,e.useEffect)(()=>{!a&&!o&&re()},[a,o,re]),i.current=t,(0,e.useEffect)(()=>{o&&k&&(P.current?.dispose(),P.current=u.current?.onDidChangeModelContent($=>{A.current||k(u.current.getValue(),$)}))},[o,k]),(0,e.useEffect)(()=>{if(o){let $=s.current.editor.onDidChangeMarkers(b=>{let B=u.current.getModel()?.uri;if(B&&b.find(G=>G.path===B.path)){let G=s.current.editor.getModelMarkers({resource:B});C?.(G)}});return()=>{$?.dispose()}}return()=>{}},[o,C]);function Oe(){P.current?.dispose(),q?w&&T.set(g,u.current.saveViewState()):u.current.getModel()?.dispose(),u.current.dispose()}return m(e).createElement(Q,{width:F,height:K,isEditorReady:o,loading:j,_ref:L,className:z,wrapperProps:H})}var ye=xe,Z=(0,e.memo)(ye),Le=Z})})();
